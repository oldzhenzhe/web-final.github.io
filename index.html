<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ…¶ç¥ç¬¬100è¬è¨ªå®¢ - iPhone 16 æŠ½ç</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: #FFF5E0;
            font-family: Arial, sans-serif;
            color: #333;
            text-align: center;
        }
        h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }
        h2 {
            font-size: 1.8em;
            margin: 5px 0;
            color: #FF8C00;
        }
        .banner {
            font-size: 1.4em;
            background: linear-gradient(90deg, #FF8C00, #FFD700);
            padding: 10px 20px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            color: #333;
        }
        p {
            font-size: 1.2em;
            margin: 10px 0;
            max-width: 500px;
        }
        .instructions {
            font-size: 1.1em;
            margin: 15px 0;
            max-width: 500px;
            color: #555;
        }
        .membership-section {
            background: linear-gradient(135deg, rgba(255, 140, 0, 0.3), rgba(255, 215, 0, 0.3));
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            max-width: 500px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            border: 1px solid #FF8C00;
        }
        .membership-section h3 {
            font-size: 1.8em;
            color: #FF8C00;
            margin-bottom: 15px;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
        }
        .membership-section p {
            font-size: 1.2em;
            margin: 10px 0;
            line-height: 1.5;
        }
        .membership-section ul {
            text-align: left;
            margin: 15px 0;
            padding-left: 25px;
        }
        .membership-section li {
            font-size: 1.1em;
            margin: 8px 0;
            color: #333;
            line-height: 1.4;
        }
        .membership-button {
            padding: 14px 30px;
            font-size: 1.2em;
            background: linear-gradient(90deg, #FF8C00, #FFD700);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            color: #333;
            font-weight: bold;
            display: inline-block;
            margin-top: 15px;
        }
        .membership-button:hover {
            background: linear-gradient(90deg, #FFD700, #FF8C00);
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        #spinButton {
            padding: 15px 30px;
            font-size: 1.2em;
            background-color: #FF8C00;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            color: #333;
        }
        #spinButton:hover {
            background-color: #FFD700;
            transform: scale(1.05);
        }
        #spinButton:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        #result {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
            background-color: rgba(0, 0, 0, 0.1);
            padding: 10px 20px;
            border-radius: 10px;
            display: none;
            font-family: Arial, sans-serif;
        }
        canvas#wheelCanvas {
            border: 5px solid #333;
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        }
        #confettiCanvas {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 1000;
            background: transparent;
        }
        .footer {
            margin-top: 30px;
            width: 100%;
            padding: 20px;
            background: rgba(255, 140, 0, 0.1);
            border-top: 1px solid #ddd;
            text-align: center;
        }
        .footer p {
            font-size: 1em;
            color: #777;
            margin: 5px 0;
            max-width: none;
        }
        .social-links {
            margin-top: 10px;
        }
        .social-button {
            display: inline-block;
            padding: 8px 15px;
            margin: 0 5px;
            background-color: #FF8C00;
            color: #333;
            text-decoration: none;
            border-radius: 5px;
            font-size: 0.9em;
            transition: background-color 0.2s;
        }
        .social-button:hover {
            background-color: #FFD700;
        }
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ffffff, #fff9e6);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            max-width: 450px;
            width: 90%;
            border: 2px solid #FF8C00;
        }
        .popup h3 {
            margin-top: 0;
            color: #FF8C00;
            font-size: 1.8em;
            text-align: center;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
        }
        .popup p {
            font-size: 1.1em;
            color: #555;
            margin: 10px 0;
            line-height: 1.5;
        }
        .popup label {
            display: block;
            margin: 15px 0 5px;
            font-size: 1.1em;
            color: #333;
            font-weight: bold;
        }
        .popup input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #FF8C00;
            border-radius: 8px;
            font-size: 1em;
            font-family: Arial, sans-serif;
            background-color: #fff9e6;
            transition: border-color 0.2s;
        }
        .popup input:focus {
            border-color: #FFD700;
            outline: none;
        }
        .popup button {
            padding: 12px 25px;
            background: linear-gradient(90deg, #FF8C00, #FFD700);
            border: none;
            border-radius: 25px;
            color: #333;
            cursor: pointer;
            font-size: 1.1em;
            font-family: Arial, sans-serif;
            font-weight: bold;
            width: 100%;
            transition: background 0.2s, transform 0.2s;
        }
        .popup button:hover {
            background: linear-gradient(90deg, #FFD700, #FF8C00);
            transform: scale(1.03);
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1500;
        }
        #crashPage {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0000ff;
            color: #ffffff;
            font-family: 'Courier New', monospace;
            padding: 20px;
            z-index: 3000;
            text-align: left;
            overflow-y: auto;
        }
        #crashPage h3 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }
        #crashPage p {
            font-size: 1em;
            margin: 5px 0;
            max-width: none;
        }
        #crashPage button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #ffffff;
            color: #0000ff;
            border: 1px solid #ffffff;
            cursor: pointer;
            font-family: 'Courier New', monospace;
        }
        #spinningCrashPage {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #FFF5E0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            font-family: Arial, sans-serif;
            color: #333;
        }
        .spinner {
            width: 80px;
            height: 80px;
            border: 8px solid #FFD700;
            border-top: 8px solid #FF8C00;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        #spinningCrashPage h3 {
            font-size: 2em;
            color: #FF8C00;
            margin-bottom: 15px;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
        }
        #spinningCrashPage p {
            font-size: 1.2em;
            color: #555;
            margin: 10px 0;
            max-width: 500px;
            text-align: center;
        }
        #spinningCrashPage button {
            padding: 12px 25px;
            background: linear-gradient(90deg, #FF8C00, #FFD700);
            border: none;
            border-radius: 25px;
            color: #333;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: background 0.2s, transform 0.2s;
        }
        #spinningCrashPage button:hover {
            background: linear-gradient(90deg, #FFD700, #FF8C00);
            transform: scale(1.05);
        }
        .comment-section {
            background: linear-gradient(135deg, rgba(255, 140, 0, 0.3), rgba(255, 215, 0, 0.3));
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            max-width: 500px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            border: 1px solid #FF8C00;
        }
        .comment-section h3 {
            font-size: 1.8em;
            color: #FF8C00;
            margin-bottom: 15px;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
        }
        .comment {
            background: #fff9e6;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border: 1px solid #FF8C00;
            text-align: left;
        }
        .comment p {
            font-size: 1.1em;
            color: #333;
            margin: 5px 0;
            line-height: 1.4;
        }
        .comment .name {
            font-weight: bold;
            color: #FF8C00;
        }
        .comment .date {
            font-size: 0.9em;
            color: #777;
        }
    </style>
</head>
<body>
<canvas id="confettiCanvas"></canvas>
<h1>æ…¶ç¥ç¬¬100è¬è¨ªå®¢ - iPhone 16 å¤§çæŠ½çï¼</h1>
<h2>æ­å–œä½ æˆç‚ºæˆ‘å€‘çš„ç¬¬100è¬ä½è²´å®¢ï¼</h2>
<div class="banner">ä½ æ˜¯ç¬¬100è¬è¨ªå®¢ï¼å¿«ä¾†è©¦è©¦æ‰‹æ°£ï¼</div>
<p>ä½ æ˜¯æˆ‘å€‘ç¬¬100è¬å€‹è¨ªå®¢ï¼å¿«ä¾†è½‰å‹•å¹¸é‹è¼ªç›¤ï¼Œè´å–iPhone 16æˆ–é©šå–œå¥½ç¦®ï¼</p>
<p class="instructions">åƒèˆ‡æ–¹å¼ï¼šé»æ“Šä¸‹æ–¹ã€Œé–‹å§‹è½‰å‹•ã€æŒ‰éˆ•ï¼Œè®“å¹¸é‹è¼ªç›¤æ±ºå®šä½ çš„çå“ï¼æ¯ä½è¨ªå®¢éƒ½æœ‰æ©Ÿæœƒè´å¾—å¤§çï¼Œç«‹å³è©¦è©¦å§ï¼</p>
<div class="membership-section">
    <h3>åŠ å…¥æœƒå“¡ï¼Œè´iPhone 16ï¼</h3>
    <p>æˆç‚ºæœƒå“¡ï¼Œç«‹å³ç²å¾—æŠ½çè³‡æ ¼ï¼Œé‚„æœ‰æ›´å¤šå°ˆå±¬ç¦åˆ©ç­‰ä½ ä¾†è§£é–ï¼</p>
    <ul>
        <li>ğŸ åƒåŠ iPhone 16æŠ½çï¼Œæœ‰æ©Ÿæœƒå°‡æœ€æ–°æ¬¾iPhone 16å¸¶å›å®¶ï¼</li>
        <li>ğŸ’° ç¨å®¶å„ªæƒ èˆ‡æŠ˜æ‰£ï¼Œæ¯æ¬¡æ¶ˆè²»éƒ½çœæ›´å¤šï¼</li>
        <li>ğŸ“± å€‹äººåŒ–å…§å®¹æ¨è–¦ï¼Œè¼•é¬†ç™¼ç¾ä½ å–œæ„›çš„è³‡è¨Šï¼</li>
        <li>ğŸš€ å„ªå…ˆé«”é©—æœ€æ–°åŠŸèƒ½ï¼Œæ°¸é èµ°åœ¨æ½®æµå‰ç«¯ï¼</li>
        <li>ğŸ‰ åƒåŠ æœƒå“¡é™å®šæ´»å‹•ï¼Œçµè­˜å¿—åŒé“åˆçš„æœ‹å‹ï¼</li>
    </ul>
    <p>åªéœ€ä¸€åˆ†é˜å…è²»è¨»å†Šï¼Œç„¡ä»»ä½•éš±è—è²»ç”¨ï¼Œè³‡æ–™å®‰å…¨æœ‰ä¿éšœï¼</p>
    <button onclick="showRegisterPopup()" class="membership-button">ç«‹å³è¨»å†Šï¼ŒåƒåŠ æŠ½çï¼</button>
</div>
<div id="canvasContainer"></div>
<button id="spinButton" onclick="startSpin()">é–‹å§‹è½‰å‹•</button>
<div id="result"></div>
<div class="comment-section">
    <h3>å¾—çè€…ç•™è¨€</h3>
    <div class="comment">
        <p class="name">å°æ˜</p>
        <p>çœŸçš„ä¸æ•¢ç›¸ä¿¡æˆ‘æŠ½ä¸­äº†iPhone 16ï¼å¡«å®Œè³‡æ–™å¾Œï¼Œä¸‰å¤©å…§å°±æ”¶åˆ°æ‰‹æ©Ÿäº†ï¼Œè¶…å¿«ï¼æ„Ÿè¬é€™å€‹æ´»å‹•ï¼</p>
        <p class="date">2025-06-08</p>
    </div>
    <div class="comment">
        <p class="name">é›…å©·</p>
        <p>æŠ½åˆ°iPhone 16çœŸçš„è¶…é–‹å¿ƒï¼ç‰©æµè¶…çµ¦åŠ›ï¼Œå…©å¤©å°±é€åˆ°æˆ‘æ‰‹ä¸Šï¼Œå“è³ªå®Œç¾ï¼</p>
        <p class="date">2025-06-07</p>
    </div>
    <div class="comment">
        <p class="name">é˜¿å‰</p>
        <p>åŸæœ¬åªæ˜¯è©¦è©¦çœ‹ï¼Œæ²’æƒ³åˆ°çœŸçš„ä¸­äº†iPhone 16ï¼å¯„é€é€Ÿåº¦å¾ˆå¿«ï¼Œå®¢æœä¹Ÿå¾ˆè¦ªåˆ‡ï¼Œå¤ªæ£’äº†ï¼</p>
        <p class="date">2025-06-06</p>
    </div>
</div>
<div class="footer">
    <p>æ„Ÿè¬ä½ æˆç‚ºæˆ‘å€‘ç¬¬100è¬ä½è¨ªå®¢ï¼é€™å ´æŠ½çæ´»å‹•æ˜¯ç‚ºäº†æ…¶ç¥é€™å€‹é‡è¦é‡Œç¨‹ç¢‘ï¼Œçå“åŒ…æ‹¬å¤¢å¯ä»¥æ±‚çš„iPhone 16åŠå…¶ä»–é©šå–œå¥½ç¦®ï¼</p>
    <p>å¿«å°‡é€™ä»½å–œæ‚…åˆ†äº«çµ¦æœ‹å‹ï¼Œä¸€èµ·åŠ å…¥å¹¸é‹è¼ªç›¤çš„æ¨‚è¶£ï¼</p>
    <div class="social-links">
        <a href="#" class="social-button">åˆ†äº«è‡³Facebook</a>
        <a href="#" class="social-button">åˆ†äº«è‡³Line</a>
        <a href="#" class="social-button">åˆ†äº«è‡³Instagram</a>
    </div>
    <p>æœ‰ä»»ä½•å•é¡Œï¼Ÿè«‹è¯ç¹«æˆ‘å€‘ï¼š<a href="mailto:support@example.com">support@example.com</a></p>
</div>
<div class="overlay" id="overlay"></div>
<div id="popupForm" class="popup">
    <h3>æ­å–œæŠ½ä¸­ iPhone 16ï¼</h3>
    <p>è«‹å¡«å¯«ä»¥ä¸‹è³‡è¨Šä»¥é ˜å–çå“ï¼š</p>
    <label for="name">å§“å</label>
    <input type="text" id="name" required>
    <label for="phone">é›»è©±</label>
    <input type="tel" id="phone" required>
    <label for="address">åœ°å€</label>
    <input type="text" id="address" required>
    <button onclick="submitForm()">æäº¤</button>
</div>
<div id="registerPopup" class="popup">
    <h3>æœƒå“¡è¨»å†Š</h3>
    <p>è«‹å¡«å¯«ä»¥ä¸‹è³‡è¨Šä»¥å®Œæˆè¨»å†Šä¸¦åƒåŠ iPhone 16æŠ½çï¼</p>
    <label for="regName">å§“å</label>
    <input type="text" id="regName" required placeholder="è¼¸å…¥æ‚¨çš„å§“å">
    <label for="regDob">å‡ºç”Ÿå¹´æœˆæ—¥</label>
    <input type="date" id="regDob" required>
    <label for="regPhone">é›»è©±è™Ÿç¢¼</label>
    <input type="tel" id="regPhone" required placeholder="è¼¸å…¥æ‚¨çš„é›»è©±è™Ÿç¢¼">
    <label for="regEmail">é›»å­éƒµä»¶</label>
    <input type="email" id="regEmail" required placeholder="è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶">
    <button onclick="submitRegisterForm()">æäº¤è¨»å†Š</button>
</div>
<div id="crashPage">
    <h3>ç³»çµ±éŒ¯èª¤ï¼</h3>
    <p>ç³Ÿç³•ï¼æˆ‘å€‘çš„ä¼ºæœå™¨å› ç‚ºä½ è´å¾—iPhone 16çš„å–œæ‚…è€Œéè¼‰äº†ï¼</p>
    <p>éŒ¯èª¤ä»£ç¢¼ï¼šWINNER_OVERLOAD_1000000</p>
    <p>è«‹ä¸è¦é©šæ…Œï¼ä½ çš„è³‡æ–™å·²å®‰å…¨è¨˜éŒ„ï¼ˆå¤§æ¦‚å§ï¼‰ã€‚</p>
    <p>å»ºè­°æ“ä½œï¼šè«‹ç¨å¾Œå†è©¦ï¼Œæˆ–è¯ç¹«æˆ‘å€‘çš„æŠ€è¡“åœ˜éšŠï¼ˆå¦‚æœä»–å€‘é‚„æ²’é€ƒè·‘çš„è©±ï¼‰ã€‚</p>
    <p>æ„Ÿè¬ä½ çš„åƒèˆ‡ï¼æŒ‰ä¸‹æ–¹æŒ‰éˆ•è¿”å›ä¸»é é¢ï¼Œå‡è£ä»€éº¼éƒ½æ²’ç™¼ç”Ÿï¼</p>
    <button onclick="showSpinningCrashPage()">è¿”å›ä¸»é é¢</button>
</div>
<div id="spinningCrashPage">
    <div class="spinner"></div>
    <h3>ç³»çµ±ä¿®å¾©ä¸­...</h3>
    <p>å“‡ï¼ä½ çš„å¹¸é‹æŠŠæˆ‘å€‘çš„ä¼ºæœå™¨éœ‡æšˆäº†ï¼æˆ‘å€‘æ­£åœ¨æ‹¼å‘½ä¿®å¾©ï¼Œè«‹ç¨ç­‰ç‰‡åˆ»ï¼</p>
    <button onclick="resetPage()">è¿”å›ä¸»é é¢</button>
</div>

<script>
    let prizes = [
        "iPhone 16 (128GB)",
        "è—èŠ½è€³æ©Ÿ",
        "è¡Œå‹•é›»æº",
        "å†è©¦ä¸€æ¬¡",
        "æ™ºèƒ½æ‰‹ç’°",
        "è—èŠ½éŸ³ç®±",
        "æ„Ÿè¬åƒèˆ‡",
        "ç¾é‡‘5000å…ƒ"
    ];
    let colors = ["#FF8C00", "#FFD700"];
    let fixedPrizeOrder = [3, 0, 1, 2, 4, 5, 6, 7];
    let wheel;
    let angle = 0;
    let spinning = false;
    let spinSpeed = 0;
    let spinTime = 0;
    let spinTimeTotal = 5000;
    let selectedPrize = "";
    let confetti = [];
    let confettiCanvas;
    let spinCount = 0;

    // è¨­ç½®åˆå§‹è§’åº¦
    let arcSize = 360 / prizes.length;
    angle = -(0 + 0.5) * arcSize % 360;
    if (angle < 0) angle += 360;

    // é¡¯ç¤ºè¨»å†Šå½ˆçª—
    function showRegisterPopup() {
        document.getElementById('registerPopup').style.display = 'block';
        document.getElementById('overlay').style.display = 'block';
    }

    // æäº¤è¨»å†Šè¡¨å–®
    function submitRegisterForm() {
        let name = document.getElementById('regName').value;
        let dob = document.getElementById('regDob').value;
        let phone = document.getElementById('regPhone').value;
        let email = document.getElementById('regEmail').value;

        if (name && dob && phone && email) {
            console.log("Registered:", { name, dob, phone, email });
            alert("è¨»å†ŠæˆåŠŸï¼æ‚¨å·²ç²å¾—æŠ½çè³‡æ ¼ï¼");
            document.getElementById('registerPopup').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('regName').value = '';
            document.getElementById('regDob').value = '';
            document.getElementById('regPhone').value = '';
            document.getElementById('regEmail').value = '';
        } else {
            alert("è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½ï¼");
        }
    }

    // å½©å¸¶è¨­ç½®
    function setupConfetti() {
        confettiCanvas = document.getElementById('confettiCanvas');
        confettiCanvas.width = window.innerWidth;
        confettiCanvas.height = window.innerHeight;
        let ctx = confettiCanvas.getContext('2d');
        for (let i = 0; i < 200; i++) {
            confetti.push({
                x: Math.random() * confettiCanvas.width,
                y: Math.random() * confettiCanvas.height - confettiCanvas.height,
                r: Math.random() * 4 + 1,
                d: Math.random() * 100,
                color: colors[Math.floor(Math.random() * colors.length)],
                tilt: Math.random() * 10,
                tiltAngle: 0
            });
        }
        function drawConfetti() {
            ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
            confetti.forEach(p => {
                p.tiltAngle += 0.1;
                p.y += Math.cos(p.d) + 1 + p.r / 2;
                p.tilt = Math.sin(p.tiltAngle) * 15;
                if (p.y > confettiCanvas.height) {
                    p.y = -p.r - Math.random() * 50;
                    p.x = Math.random() * confettiCanvas.width;
                }
                ctx.beginPath();
                ctx.lineWidth = p.r;
                ctx.strokeStyle = p.color;
                ctx.moveTo(p.x + p.tilt + p.r, p.y);
                ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r);
                ctx.stroke();
            });
            requestAnimationFrame(drawConfetti);
        }
        drawConfetti();
    }

    // éŸ³æ•ˆ
    function playCelebrationSound() {
        let ctx = new AudioContext();
        let oscillator = ctx.createOscillator();
        oscillator.type = 'sine';
        oscillator.frequency.setValueAtTime(440, ctx.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(880, ctx.currentTime + 0.5);
        oscillator.connect(ctx.destination);
        oscillator.start();
        oscillator.stop(ctx.currentTime + 0.5);
    }

    // åˆå§‹åŒ–ç•«å¸ƒ
    function setup() {
        let canvas = createCanvas(400, 400);
        canvas.parent('canvasContainer');
        canvas.id('wheelCanvas');
        angleMode(DEGREES);
        textAlign(CENTER, CENTER);
        textSize(14);
        textFont('Arial');
        angle = -(0 + 0.5) * arcSize % 360;
        if (angle < 0) angle += 360;
        setupConfetti();
    }

    // ç¹ªè£½è¼ªç›¤
    function draw() {
        background(255);
        translate(width / 2, height / 2);
        rotate(angle);

        let arcSize = 360 / prizes.length;
        for (let i = 0; i < prizes.length; i++) {
            fill(colors[i % colors.length]);
            arc(0, 0, 380, 380, i * arcSize, (i + 1) * arcSize);
            push();
            rotate(i * arcSize + arcSize / 2);
            fill(255);
            text(prizes[i], 100, 0); // ç§»é™¤æ¨™è™Ÿï¼Œåªé¡¯ç¤ºçå“åç¨±
            pop();
        }

        push();
        resetMatrix();
        translate(width / 2, 2.5);
        fill(255, 0, 0);
        stroke(51, 51, 51);
        strokeWeight(2);
        triangle(-12, -5, 12, -5, 0, 10);
        pop();

        if (spinning) {
            angle += spinSpeed;
            spinTime += deltaTime;
            if (spinTime >= spinTimeTotal) {
                spinning = false;
                spinSpeed = 0;
                let arcSize = 360 / prizes.length;
                let selectedIndex = prizes.indexOf(selectedPrize);
                let targetAngle = -(selectedIndex + 0.5) * arcSize;
                angle = targetAngle % 360;
                if (angle < 0) angle += 360;
                showResult();
                playCelebrationSound();
                document.getElementById('spinButton').disabled = false;
            } else {
                spinSpeed = lerp(spinSpeed, 0, spinTime / spinTimeTotal);
            }
        }
    }

    // é–‹å§‹æ—‹è½‰
    function startSpin() {
        if (!spinning) {
            spinning = true;
            spinSpeed = 3600 / (spinTimeTotal / 1000);
            spinTime = 0;
            spinCount++;
            let prizeIndex = fixedPrizeOrder[(spinCount - 1) % fixedPrizeOrder.length];
            selectedPrize = prizes[prizeIndex];
            let arcSize = 360 / prizes.length;
            let selectedIndex = prizes.indexOf(selectedPrize);
            let targetAngle = 3600 - (selectedIndex + 0.5) * arcSize;
            angle = targetAngle % 360;
            if (angle < 0) angle += 360;
            document.getElementById('spinButton').disabled = true;
            document.getElementById('result').style.display = 'none';
        }
    }

    // é¡¯ç¤ºçµæœ
    function showResult() {
        let arcSize = 360 / prizes.length;
        let selectedIndex = prizes.indexOf(selectedPrize);
        let targetAngle = -(selectedIndex + 0.5) * arcSize;
        angle = targetAngle % 360;
        if (angle < 0) angle += 360;
        document.getElementById('result').innerText = `æ­å–œä½ æŠ½ä¸­ï¼š${selectedPrize}ï¼`;
        document.getElementById('result').style.display = 'block';
        if (selectedPrize === "iPhone 16 (128GB)") {
            showPopup();
        }
    }

    // é¡¯ç¤ºé ˜çè¡¨å–®
    function showPopup() {
        document.getElementById('popupForm').style.display = 'block';
        document.getElementById('overlay').style.display = 'block';
    }

    // æäº¤é ˜çè¡¨å–®
    function submitForm() {
        let name = document.getElementById('name').value;
        let phone = document.getElementById('phone').value;
        let address = document.getElementById('address').value;
        if (name && phone && address) {
            console.log("Submitted:", { name, phone, address });
            document.getElementById('popupForm').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('crashPage').style.display = 'block';
            document.getElementById('name').value = '';
            document.getElementById('phone').value = '';
            document.getElementById('address').value = '';
        } else {
            alert("è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½ï¼");
        }
    }

    // é¡¯ç¤ºæ—‹è½‰ç•¶æ©Ÿé é¢
    function showSpinningCrashPage() {
        document.getElementById('crashPage').style.display = 'none';
        document.getElementById('spinningCrashPage').style.display = 'flex';
    }

    // é‡ç½®é é¢
    function resetPage() {
        document.getElementById('spinningCrashPage').style.display = 'none';
        spinCount = 0;
        let arcSize = 360 / prizes.length;
        angle = -(0 + 0.5) * arcSize % 360;
        if (angle < 0) angle += 360;
    }
</script>
</body>
</html>